$((function(){GetData("Season2",SetupGames)}));var SMGameList=new Array,RCGameList=new Array,TCGameList=new Array,TSGameList=new Array,leagueList=new Array,sadFaceList=new Array;function SetupGames(data){var userList=new Array;for(i=1;i<data.values.length;i++){var userName=data.values[i][0];userList.includes(userName)||userList.push(userName);var thisUSerList=new Array;"Seb"==userName?thisUSerList=SMGameList:"Russ"==userName?thisUSerList=RCGameList:"Tom"==userName?thisUSerList=TCGameList:"Smith"==userName&&(thisUSerList=TSGameList),thisUSerList.push(new Game(data.values[i][0],data.values[i][1],data.values[i][2],data.values[i][3],data.values[i][4],data.values[i][5],parseInt(data.values[i][6]),parseInt(data.values[i][7]),data.values[i][8]))}BuildLeague(),BuildLastScores(),$(".titlebottomright").html("Week "+SMGameList.length),BuildTotals(),BuildTotalPicks()}function GetData(sheetName,completeEvent){var aaa,spreadsheetId,url;Ajax(`https://sheets.googleapis.com/v4/spreadsheets/${"1vQ3s9xdLVtMLuY_gc8psrxSkLvdsG4_XuTEYJmuxJ4Y"}/values/${sheetName}?key=${"AIzaSyBnvRLQ5Wfv5MNb5q0APNsijA9xXpOYnaA"}`,(function(data){completeEvent.call("",data)}),"")}function Ajax(url,completeEvent,args){$.ajax({url:url,type:"GET",success:function(data){completeEvent.call(this,data)}})}function BuildLeague(){var leagueRowTemplate=$("#LeagueRow_Template").html(),html="",gamesArray=new Array;for(gamesArray.push(SMGameList),gamesArray.push(RCGameList),gamesArray.push(TCGameList),gamesArray.push(TSGameList),g=0;g<gamesArray.length;g++){var l=new League;l.Name=gamesArray[g][0].Name,leagueList.push(l)}for(g=0;g<gamesArray[0].length;g++){var weeksGamesList=new Array;for(i=0;i<gamesArray.length;i++)weeksGamesList.push(gamesArray[i][g]);for(CalculateLeagueRow(weeksGamesList),leagueList.sort((a,b)=>a.Points<b.Points?-1:a.Points>b.Points?1:a.GoalsDiff<b.GoalsDiff?-1:a.GoalsDiff>b.GoalsDiff?1:0),x=0;x<leagueList.length;x++){var change=0;change=leagueList[x].Change<x+1?leagueList[x].PreviousPosition-(x-1):x-1-leagueList[x].PreviousPosition,leagueList[x].Change=change}}var predictsIn=!1;for(g=0;g<gamesArray.length;g++){var Last5="",last5From=6;for(gamesArray[g].length<last5From&&(last5From=gamesArray[g].length+1),i=gamesArray[g].length-1;i>gamesArray[g].length-last5From&&!(i<0);i--)""!=gamesArray[g][i].Result?Last5=gamesArray[g][i].ToWin==gamesArray[g][i].Result?"W-"+Last5:"L-"+Last5:predictsIn=!0;for(ll=0;ll<leagueList.length;ll++)if(leagueList[ll].Name==gamesArray[g][0].Name){leagueList[ll].Last5=Last5.substring(0,Last5.length-1);break}}for(g=0;g<gamesArray.length;g++){var Streak="L0";for(i=0;i<gamesArray[g].length;i++)if(""!=gamesArray[g][i].Result){var streakSplit=Streak.split(""),nextStreakNo=0;Streak=gamesArray[g][i].ToWin==gamesArray[g][i].Result?"W"==streakSplit[0]?"W"+(nextStreakNo=parseInt(streakSplit[1])+1):"W1":"L"==streakSplit[0]?"L"+(nextStreakNo=parseInt(streakSplit[1])+1):"L1"}for(ll=0;ll<leagueList.length;ll++)if(leagueList[ll].Name==gamesArray[g][0].Name){leagueList[ll].Streak=Streak;break}}for(g=0;g<gamesArray.length;g++){var totalOdds=0,name="";for(i=0;i<gamesArray[g].length;i++)if(name=gamesArray[g][i].Name,""!=gamesArray[g][i].Result){var oddsArray=gamesArray[g][i].Odds.split("/"),oddsDec;totalOdds+=oddsArray[0]/oddsArray[1]+1}var avgOddsDec=totalOdds/gamesArray[g].length;avgOddsDec=100*(avgOddsDec-1);var avgOdds=reduce(Math.round(avgOddsDec),100);for(l=leagueList.length-1;l>-1;l--)if(leagueList[l].Name==name){leagueList[l].AvgOdds=avgOdds[0]+"/"+avgOdds[1];break}}html+=leagueRowTemplate.replace("$ID$","&nbsp;").replace("$HEADER$","header").replace(/\$NAME\$/g,"Name").replace("$WL$","W-L").replace("$PRC$","PRC").replace("$GF$","GF").replace("$GA$","GA").replace("$GD$","GD").replace("$STREAK$","Streak").replace("$LAST5$","Form").replace("$CHANGE$","&nbsp;").replace("$AVGODDS$","Avg Odds");var last5WinDiv='<div class="last5outer win"><span>&check;</span></div>',last5LoseDiv='<div class="last5outer lose"><span>&cross;</span></div>',last5PredictDiv='<div class="last5outer predict"><span>?</span></div>',leaguePos=0;for(l=leagueList.length-1;l>-1;l--){var leader="";1==++leaguePos&&(leader="leader");var last5Html=leagueList[l].Last5.replace(/-/g,"").replace(/W/g,last5WinDiv).replace(/L/g,last5LoseDiv);predictsIn&&(last5Html+=last5PredictDiv),html+=leagueRowTemplate.replace("$ID$",leaguePos).replace("$HEADER$",leader).replace(/\$NAME\$/g,leagueList[l].Name).replace("$WL$",leagueList[l].Win+"-"+leagueList[l].Lose).replace("$PRC$",leagueList[l].Percent.toString().substring(0,5)).replace("$GF$",leagueList[l].GoalsFor).replace("$GA$",leagueList[l].GoalsAgainst).replace("$GD$",leagueList[l].GoalsDiff).replace("$STREAK$",leagueList[l].Streak).replace("$LAST5$",last5Html).replace("$CHANGE$","&nbsp;").replace("$AVGODDS$",leagueList[l].AvgOdds)}$("#LeagueOuter").html(html)}function CalculateLeagueRow(gamesArray){for(gg=0;gg<gamesArray.length;gg++)if(""!=gamesArray[gg].Result){var leagueIndex=0;for(l=0;l<leagueList.length;l++)if(leagueList[l].Name==gamesArray[gg].Name){leagueIndex=l;break}var W=leagueList[leagueIndex].Win,L=leagueList[leagueIndex].Lose,PTS=leagueList[leagueIndex].Points,GF=leagueList[leagueIndex].GoalsFor,GA=leagueList[leagueIndex].GoalsAgainst,Streak=leagueList[leagueIndex].Streak,Last5=new Array;""!=gamesArray[gg].Result&&(gamesArray[gg].ToWin==gamesArray[gg].Result?(W++,PTS++):L++),"H"==gamesArray[gg].ToWin?(GF+=gamesArray[gg].HomeScore,GA+=gamesArray[gg].AwayScore):(GA+=gamesArray[gg].HomeScore,GF+=gamesArray[gg].AwayScore),leagueList[leagueIndex].Win=W,leagueList[leagueIndex].Lose=L,leagueList[leagueIndex].Points=PTS,leagueList[leagueIndex].Percent=W/(W+L),leagueList[leagueIndex].GoalsFor=GF,leagueList[leagueIndex].GoalsAgainst=GA,leagueList[leagueIndex].GoalsDiff=GF-GA,leagueList[leagueIndex].Streak=Streak,leagueList[leagueIndex].PreviousPosition=leagueIndex+1}}function LeagueRow_CLick(name){var gameList=new Array;$(".leaguerow.selected").removeClass("selected"),$("#LeagueRow_"+name).addClass("selected"),"Seb"==name?gameList=SMGameList:"Russ"==name?gameList=RCGameList:"Tom"==name?gameList=TCGameList:"Smith"==name&&(gameList=TSGameList),BuildGames(gameList)}function BuildLastScores(){var gameList=new Array;gameList=new Array,SMGameList.length-1>-1&&(gameList.push(SMGameList[SMGameList.length-1]),gameList.push(RCGameList[RCGameList.length-1]),gameList.push(TCGameList[TCGameList.length-1]),gameList.push(TSGameList[TSGameList.length-1]),BuildGames(gameList))}function BuildGames(gameList){var template=$("#ScoresRow_Template").html(),html="";for(html=template.replace(/\$HEADER\$/g,"header").replace(/\$NAME\$/g,"Name").replace(/\$DATE\$/g,"Date").replace(/\$HOMETEAM\$/g,"Home").replace(/\$HOMESCORE\$/g,"").replace(/\$AWAYTEAM\$/g,"Away").replace(/\$AWAYSCORE\$/g,"").replace(/\$ODDS\$/g,"Odds").replace(/\$NOTES\$/g,"&nbsp;"),i=0;i<gameList.length;i++){var homeWin="",awayWin="",homeLose="",awayLose="",win=!1,notes="",homeRecordWrong=0,homeRecordCorrect=0,awayRecordWrong=0,awayRecordCorrect=0;if(""!=gameList[i].Result){if(gameList[i].ToWin==gameList[i].Result)win=!0,notes="&#129321;";else{var randomNumber=Math.floor(Math.random()*sadFaceList.length);notes=sadFaceList[randomNumber]}"H"==gameList[i].ToWin&&win?homeWin="win":"A"==gameList[i].ToWin&&win?awayWin="win":"H"!=gameList[i].ToWin||win?"A"!=gameList[i].ToWin||win||(awayLose="lose"):homeLose="lose"}else"H"==gameList[i].ToWin?homeWin="pick":awayWin="pick",notes="&#129310;";var homeRecord=GetRecord(gameList[i].Home),awayRecord=GetRecord(gameList[i].Away),thisDate,dateArray=new Date(gameList[i].Date).toDateString().split(" "),dateDisplay=dateArray[1]+" "+dateArray[2];html+=template.replace(/\$HEADER\$/g,"").replace(/\$NAME\$/g,gameList[i].Name).replace(/\$DATE\$/g,dateDisplay).replace(/\$HOMETEAM\$/g,gameList[i].Home).replace(/\$HOMEWIN\$/g,homeWin).replace(/\$HOMELOSE\$/g,homeLose).replace(/\$HOMESCORE\$/g,gameList[i].HomeScore).replace(/\$AWAYTEAM\$/g,gameList[i].Away).replace(/\$AWAYWIN\$/g,awayWin).replace(/\$AWAYLOSE\$/g,awayLose).replace(/\$AWAYSCORE\$/g,gameList[i].AwayScore).replace(/\$HOMERECORDWRONG\$/g,homeRecord.Wrong).replace(/\$HOMERECORDCORRECT\$/g,homeRecord.Correct).replace(/\$AWAYRECORDWRONG\$/g,awayRecord.Wrong).replace(/\$AWAYRECORDCORRECT\$/g,awayRecord.Correct).replace(/\$ODDS\$/g,gameList[i].Odds).replace(/\$NOTES\$/g,notes)}$("#GamesOuter").append(html)}function GetRecord(teamName){var record=new Record(0,0),gameList=new Array;for(ii=0;ii<SMGameList.length;ii++)gameList.push(SMGameList[ii]);for(ii=0;ii<RCGameList.length;ii++)gameList.push(RCGameList[ii]);for(ii=0;ii<TCGameList.length;ii++)gameList.push(TCGameList[ii]);for(ii=0;ii<TSGameList.length;ii++)gameList.push(TSGameList[ii]);for(iii=0;iii<gameList.length;iii++)""!=gameList[iii].Result&&(gameList[iii].Home==teamName&&"H"==gameList[iii].ToWin?gameList[iii].ToWin==gameList[iii].Result?record.Correct++:gameList[iii].ToWin!=gameList[iii].Result&&record.Wrong++:gameList[iii].Away==teamName&&"A"==gameList[iii].ToWin&&(gameList[iii].ToWin==gameList[iii].Result?record.Correct++:gameList[iii].ToWin!=gameList[iii].Result&&record.Wrong++));return record}function BuildTotals(){var allGames=new Array;for(i=0;i<SMGameList.length;i++)allGames.push(SMGameList[i]);for(i=0;i<RCGameList.length;i++)allGames.push(RCGameList[i]);for(i=0;i<TCGameList.length;i++)allGames.push(TCGameList[i]);for(i=0;i<TSGameList.length;i++)allGames.push(TSGameList[i]);var template=$("#TotalItem_Template").html(),total=0;for(i=0;i<allGames.length;i++)""!=allGames[i].Result&&total++;var winners=0;for(i=0;i<allGames.length;i++)""!=allGames[i].ToWin&&""!=allGames[i].Result&&allGames[i].ToWin==allGames[i].Result&&winners++;var winnerRatio=winners/total*100,weeklyWins=0;for(i=0;i<SMGameList.length;i++)SMGameList[i].ToWin==SMGameList[i].Result&&RCGameList[i].ToWin==RCGameList[i].Result&&TCGameList[i].ToWin==TCGameList[i].Result&&TSGameList[i].ToWin==TSGameList[i].Result&&weeklyWins++;var weeklyWinningGames=new Array;for(i=0;i<SMGameList.length;i++)if(""!=SMGameList[i].Result){var thisWeeklyWins=0;SMGameList[i].ToWin==SMGameList[i].Result&&thisWeeklyWins++,RCGameList[i].ToWin==RCGameList[i].Result&&thisWeeklyWins++,TCGameList[i].ToWin==TCGameList[i].Result&&thisWeeklyWins++,TSGameList[i].ToWin==TSGameList[i].Result&&thisWeeklyWins++,weeklyWinningGames.push(thisWeeklyWins)}var weeklyAvgWins=0,weeklyTotalWins=0;for(i=0;i<weeklyWinningGames.length;i++)weeklyTotalWins+=weeklyWinningGames[i];weeklyAvgWins=weeklyTotalWins/weeklyWinningGames.length;var html="";html+=template.replace(/\$TITLE\$/g,"Total Picks").replace(/\$VALUE\$/g,total),html+=template.replace(/\$TITLE\$/g,"Winning Picks").replace(/\$VALUE\$/g,winners),html+=template.replace(/\$TITLE\$/g,"Win Ratio").replace(/\$VALUE\$/g,winnerRatio.toString().substring(0,5)+"%"),html+=template.replace(/\$TITLE\$/g,"Wins per Week").replace(/\$VALUE\$/g,weeklyAvgWins.toString().substring(0,4)),html+=template.replace(/\$TITLE\$/g,"Winning Weeks").replace(/\$VALUE\$/g,weeklyWins),$("#TotalsOuter").html(html)}function reduce(numerator,denominator){var gcd=function gcd(a,b){return b?gcd(b,a%b):a};return[numerator/(gcd=gcd(numerator,denominator)),denominator/gcd]}function BuildTotalPicks(){var pickTotalList=new Array,gamesArray=new Array;for(gamesArray.push(SMGameList),gamesArray.push(RCGameList),gamesArray.push(TCGameList),gamesArray.push(TSGameList),i=0;i<gamesArray.length;i++)for(ii=0;ii<gamesArray[i].length;ii++){var thisTeam=gamesArray[i][ii].Home;"A"==gamesArray[i][ii].ToWin&&(thisTeam=gamesArray[i][ii].Away);var isWin=gamesArray[i][ii].ToWin==gamesArray[i][ii].Result,isFound=!1;for(iii=0;iii<pickTotalList.length;iii++)if(pickTotalList[iii].Team==thisTeam){isFound=!0,pickTotalList[iii].Total++,isWin?pickTotalList[iii].Win++:pickTotalList[iii].Loss++;break}isFound||pickTotalList.push(new PickTotal(thisTeam,1,isWin?1:0,isWin?0:1))}var topPercent=-1,secondPercent=-1;for(i=0;i<pickTotalList.length;i++)pickTotalList[i].Percent=pickTotalList[i].Win/(pickTotalList[i].Win+pickTotalList[i].Loss),pickTotalList[i].Percent>=topPercent?topPercent=pickTotalList[i].Percent:pickTotalList[i].Percent>=secondPercent&&(secondPercent=pickTotalList[i].Percent);pickTotalList.sort((b,a)=>a.Total<b.Total?-1:a.Total>b.Total?1:0);var pickRowTemplate=$("#PickLeagueRow_Template").html(),html="";html+=pickRowTemplate.replace("$ID$","&nbsp;").replace("$HEADER$","header").replace(/\$NAME\$/g,"Team").replace(/\$TOTAL\$/g,"Total").replace("$WL$","W-L").replace("$PRC$","PRC");var pickLimit=19;for(i=0;i<pickTotalList.length;i++){var leader="";if(pickTotalList[i].Percent==topPercent?leader="leader":pickTotalList[i].Percent==secondPercent&&(leader="leader2"),html+=pickRowTemplate.replace("$ID$",i+1).replace("$HEADER$",leader).replace(/\$NAME\$/g,pickTotalList[i].Team).replace(/\$TOTAL\$/g,pickTotalList[i].Total).replace("$WL$",pickTotalList[i].Win+"-"+pickTotalList[i].Loss).replace("$PRC$",pickTotalList[i].Percent.toString().substring(0,5)),i>=19)break}$("#PickLeagueOuter").html(html)}function Game(name,date,home,away,toWin,result,homeScore,awayScore,odds){this.Name=name,this.Date=date,this.Home=null==home?"":home,this.Away=null==away?"":away,this.ToWin=null==toWin?"":toWin,this.Result=null==result?"":result,this.HomeScore=null==homeScore||""==homeScore?0:homeScore,this.AwayScore=null==awayScore||""==awayScore?0:awayScore,null==odds&&(odds="&nbsp;"),this.Odds=odds}function League(name,win,lose,points,percent,goalsFor,goalsAgainst,goalsDiff,streak,last5,previousPosition,change,avgOdds){this.Name=null==name?"":name,this.Win=null==win?0:win,this.Lose=null==lose?0:lose,this.Points=null==points?0:points,this.Percent=null==percent?0:percent,this.GoalsFor=null==goalsFor?0:goalsFor,this.GoalsAgainst=null==goalsAgainst?0:goalsAgainst,this.GoalsDiff=null==goalsDiff?0:goalsDiff,this.Streak=null==streak?"W0":streak,this.Last5=null==last5?"":last5,this.PreviousPosition=null==previousPosition?0:previousPosition,this.Change=null==change?0:change,this.AvgOdds=null==avgOdds?"":avgOdds}function Record(correct,wrong){this.Correct=correct,this.Wrong=wrong}function PickTotal(team,total,win,loss){this.Team=team,this.Total=total,this.Win=win,this.Loss=loss,this.Percent=0}sadFaceList.push("&#128542;"),sadFaceList.push("&#128544;"),sadFaceList.push("&#128545;"),sadFaceList.push("&#128546;"),sadFaceList.push("&#128547;"),sadFaceList.push("&#128548;"),sadFaceList.push("&#128550;"),sadFaceList.push("&#128551;"),sadFaceList.push("&#128552;"),sadFaceList.push("&#128553;"),sadFaceList.push("&#128557;"),sadFaceList.push("&#128560;"),sadFaceList.push("&#128566;");